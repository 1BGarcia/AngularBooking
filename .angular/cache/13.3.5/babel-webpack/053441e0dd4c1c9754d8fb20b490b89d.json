{"ast":null,"code":"import _asyncToGenerator from \"E:\\\\M7ProyectoAngular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../services/booking/booking.service\";\nimport * as i4 from \"../services/citas-usuarios/citas-usuarios.service\";\nimport * as i5 from \"@angular/forms\";\nexport class ModalRegistrarCitasComponent {\n  constructor(dialogRef, toastrSvc, booking, users, formBuilder) {\n    this.dialogRef = dialogRef;\n    this.toastrSvc = toastrSvc;\n    this.booking = booking;\n    this.users = users;\n    this.formBuilder = formBuilder;\n    this.bookingData = this.formBuilder.group({\n      phone: ['', Validators.required],\n      fecha: ['', Validators.required],\n      hora: ['', Validators.required]\n    });\n  }\n\n  ngOnInit() {\n    var _a;\n\n    this.fecha = this.fecha;\n    console.log(this.fecha);\n    (_a = this.bookingData.get('fecha')) === null || _a === void 0 ? void 0 : _a.setValue(this.fecha);\n  }\n\n  convertUTCDateToLocalDate(date) {\n    var newDate = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n    var offset = date.getTimezoneOffset() / 60;\n    var hours = date.getHours();\n    newDate.setHours(hours - offset);\n    return newDate;\n  }\n\n  submitBooking() {\n    var _this = this;\n\n    this.users.saveUserByPhone({\n      phone: this.bookingData.value.phone\n    }).subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (res) {\n        if (res != null) {\n          let generateBooking = {\n            userId: Object.values(res)[0],\n            bookingDate: _this.convertUTCDateToLocalDate(new Date(_this.bookingData.value.fecha + ':' + _this.bookingData.value.hora))\n          };\n          console.log(_this.convertUTCDateToLocalDate(new Date(_this.bookingData.value.fecha + ':' + _this.bookingData.value.hora)));\n\n          _this.booking.saveBooking(generateBooking).subscribe(res => {\n            console.log(res);\n          });\n\n          _this.toastrSvc.success(\"Tu reserva se realizó correctamente\");\n\n          _this.closeModal();\n        } else {\n          _this.toastrSvc.error(\"Este usuario no esta registrado\");\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  closeModal() {\n    this.dialogRef.close();\n  }\n\n}\n\nModalRegistrarCitasComponent.ɵfac = function ModalRegistrarCitasComponent_Factory(t) {\n  return new (t || ModalRegistrarCitasComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.BookingService), i0.ɵɵdirectiveInject(i4.CitasUsuariosService), i0.ɵɵdirectiveInject(i5.FormBuilder));\n};\n\nModalRegistrarCitasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModalRegistrarCitasComponent,\n  selectors: [[\"app-modal-registrar-citas\"]],\n  decls: 22,\n  vars: 1,\n  consts: [[\"id\", \"modal-content-wrapper\"], [\"id\", \"modal-header\"], [1, \"modal-title\"], [1, \"content-modal\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"number\", \"name\", \"telefono\", \"id\", \"telefono\", \"formControlName\", \"phone\"], [\"type\", \"date\", \"name\", \"fecha\", \"id\", \"fecha\", \"formControlName\", \"fecha\"], [\"type\", \"time\", \"id\", \"startHour\", \"name\", \"startHour\", \"min\", \"09:00\", \"max\", \"18:00\", \"formControlName\", \"hora\", \"required\", \"\"], [1, \"buttons\"], [\"type\", \"submit\"]],\n  template: function ModalRegistrarCitasComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Fecha y Hora\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\")(6, \"form\", 4);\n      i0.ɵɵlistener(\"ngSubmit\", function ModalRegistrarCitasComponent_Template_form_ngSubmit_6_listener() {\n        return ctx.submitBooking();\n      });\n      i0.ɵɵelementStart(7, \"p\")(8, \"span\");\n      i0.ɵɵtext(9, \"Telefono del usuario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\")(12, \"span\");\n      i0.ɵɵtext(13, \"Fecha seleccionada\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"p\")(16, \"span\");\n      i0.ɵɵtext(17, \"Hora de inicio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 8)(20, \"button\", 9);\n      i0.ɵɵtext(21, \"Crear reserva\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.bookingData);\n    }\n  },\n  directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.NumberValueAccessor, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.RequiredValidator],\n  styles: [\"#modal-content-wrapper[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    display: grid;\\r\\n    grid-template-rows: repeat(1fr, 3);\\r\\n}\\r\\n.modal-title[_ngcontent-%COMP%] {\\r\\n    font-size: 22px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n#modal-close-button[_ngcontent-%COMP%] {\\r\\n    background-color: #ce0909;\\r\\n}\\r\\n.content-modal[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n}\\r\\np[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    font-weight: bold;\\r\\n    font-size: 14pt;\\r\\n    width: 250px;\\r\\n}\\r\\nspan[_ngcontent-%COMP%]{\\r\\n    font-weight: bold;\\r\\n    font-size: 10pt;\\r\\n}\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    width: 100%;\\r\\n    padding: 10px;\\r\\n    border-radius: 5px;\\r\\n    border: solid 1px gray;\\r\\n    outline: none;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n    margin: 5px;\\r\\n    padding: 10px;\\r\\n    background-color: #0EAF8D;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    font-weight: bold;\\r\\n    width: 100px;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]:hover{\\r\\n    background-color: #1EDFB7;\\r\\n}\\r\\n.buttons[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: space-around;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLXJlZ2lzdHJhci1jaXRhcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixhQUFhO0lBQ2Isa0NBQWtDO0FBQ3RDO0FBQ0E7SUFDSSxlQUFlO0lBQ2YsaUJBQWlCO0FBQ3JCO0FBRUE7SUFDSSx5QkFBeUI7QUFDN0I7QUFFQTtJQUNJLGFBQWE7SUFDYix1QkFBdUI7QUFDM0I7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsaUJBQWlCO0lBQ2pCLGVBQWU7SUFDZixZQUFZO0FBQ2hCO0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsZUFBZTtBQUNuQjtBQUVBO0lBQ0ksV0FBVztJQUNYLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsc0JBQXNCO0lBQ3RCLGFBQWE7QUFDakI7QUFJQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLFlBQVk7QUFDaEI7QUFFQTtJQUNJLHlCQUF5QjtBQUM3QjtBQUdBO0lBQ0ksYUFBYTtJQUNiLDZCQUE2QjtBQUNqQyIsImZpbGUiOiJtb2RhbC1yZWdpc3RyYXItY2l0YXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNtb2RhbC1jb250ZW50LXdyYXBwZXIge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMWZyLCAzKTtcclxufVxyXG4ubW9kYWwtdGl0bGUge1xyXG4gICAgZm9udC1zaXplOiAyMnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbiNtb2RhbC1jbG9zZS1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NlMDkwOTtcclxufVxyXG5cclxuLmNvbnRlbnQtbW9kYWx7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbnB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxNHB0O1xyXG4gICAgd2lkdGg6IDI1MHB4O1xyXG59XHJcblxyXG5zcGFue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBmb250LXNpemU6IDEwcHQ7XHJcbn1cclxuXHJcbmlucHV0e1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggZ3JheTtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcblxyXG5cclxuYnV0dG9ue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzBFQUY4RDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG59XHJcblxyXG5idXR0b246aG92ZXJ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUVERkI3O1xyXG59XHJcblxyXG5cclxuLmJ1dHRvbnN7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["E:/M7ProyectoAngular/src/app/modal-registrar-citas/modal-registrar-citas.component.ts"],"names":["Validators","i0","i1","i2","i3","i4","i5","ModalRegistrarCitasComponent","constructor","dialogRef","toastrSvc","booking","users","formBuilder","bookingData","group","phone","required","fecha","hora","ngOnInit","_a","console","log","get","setValue","convertUTCDateToLocalDate","date","newDate","Date","getTime","getTimezoneOffset","offset","hours","getHours","setHours","submitBooking","saveUserByPhone","value","subscribe","res","generateBooking","userId","Object","values","bookingDate","saveBooking","success","closeModal","error","close","ɵfac","ModalRegistrarCitasComponent_Factory","t","ɵɵdirectiveInject","MatDialogRef","ToastrService","BookingService","CitasUsuariosService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","ModalRegistrarCitasComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ModalRegistrarCitasComponent_Template_form_ngSubmit_6_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","NumberValueAccessor","DefaultValueAccessor","NgControlStatus","FormControlName","RequiredValidator","styles"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/material/dialog\";\r\nimport * as i2 from \"ngx-toastr\";\r\nimport * as i3 from \"../services/booking/booking.service\";\r\nimport * as i4 from \"../services/citas-usuarios/citas-usuarios.service\";\r\nimport * as i5 from \"@angular/forms\";\r\nexport class ModalRegistrarCitasComponent {\r\n    constructor(dialogRef, toastrSvc, booking, users, formBuilder) {\r\n        this.dialogRef = dialogRef;\r\n        this.toastrSvc = toastrSvc;\r\n        this.booking = booking;\r\n        this.users = users;\r\n        this.formBuilder = formBuilder;\r\n        this.bookingData = this.formBuilder.group({\r\n            phone: ['', Validators.required],\r\n            fecha: ['', Validators.required],\r\n            hora: ['', Validators.required]\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        this.fecha = this.fecha;\r\n        console.log(this.fecha);\r\n        (_a = this.bookingData.get('fecha')) === null || _a === void 0 ? void 0 : _a.setValue(this.fecha);\r\n    }\r\n    convertUTCDateToLocalDate(date) {\r\n        var newDate = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\r\n        var offset = date.getTimezoneOffset() / 60;\r\n        var hours = date.getHours();\r\n        newDate.setHours(hours - offset);\r\n        return newDate;\r\n    }\r\n    submitBooking() {\r\n        this.users.saveUserByPhone({ phone: this.bookingData.value.phone }).subscribe(async (res) => {\r\n            if (res != null) {\r\n                let generateBooking = {\r\n                    userId: Object.values(res)[0],\r\n                    bookingDate: this.convertUTCDateToLocalDate(new Date(this.bookingData.value.fecha + ':' + this.bookingData.value.hora))\r\n                };\r\n                console.log(this.convertUTCDateToLocalDate(new Date(this.bookingData.value.fecha + ':' + this.bookingData.value.hora)));\r\n                this.booking.saveBooking(generateBooking).subscribe(res => {\r\n                    console.log(res);\r\n                });\r\n                this.toastrSvc.success(\"Tu reserva se realizó correctamente\");\r\n                this.closeModal();\r\n            }\r\n            else {\r\n                this.toastrSvc.error(\"Este usuario no esta registrado\");\r\n            }\r\n        });\r\n    }\r\n    closeModal() {\r\n        this.dialogRef.close();\r\n    }\r\n}\r\nModalRegistrarCitasComponent.ɵfac = function ModalRegistrarCitasComponent_Factory(t) { return new (t || ModalRegistrarCitasComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.BookingService), i0.ɵɵdirectiveInject(i4.CitasUsuariosService), i0.ɵɵdirectiveInject(i5.FormBuilder)); };\r\nModalRegistrarCitasComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ModalRegistrarCitasComponent, selectors: [[\"app-modal-registrar-citas\"]], decls: 22, vars: 1, consts: [[\"id\", \"modal-content-wrapper\"], [\"id\", \"modal-header\"], [1, \"modal-title\"], [1, \"content-modal\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"number\", \"name\", \"telefono\", \"id\", \"telefono\", \"formControlName\", \"phone\"], [\"type\", \"date\", \"name\", \"fecha\", \"id\", \"fecha\", \"formControlName\", \"fecha\"], [\"type\", \"time\", \"id\", \"startHour\", \"name\", \"startHour\", \"min\", \"09:00\", \"max\", \"18:00\", \"formControlName\", \"hora\", \"required\", \"\"], [1, \"buttons\"], [\"type\", \"submit\"]], template: function ModalRegistrarCitasComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\r\n        i0.ɵɵtext(3, \"Fecha y Hora\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\")(6, \"form\", 4);\r\n        i0.ɵɵlistener(\"ngSubmit\", function ModalRegistrarCitasComponent_Template_form_ngSubmit_6_listener() { return ctx.submitBooking(); });\r\n        i0.ɵɵelementStart(7, \"p\")(8, \"span\");\r\n        i0.ɵɵtext(9, \"Telefono del usuario\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(10, \"input\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"p\")(12, \"span\");\r\n        i0.ɵɵtext(13, \"Fecha seleccionada\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(14, \"input\", 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"p\")(16, \"span\");\r\n        i0.ɵɵtext(17, \"Hora de inicio\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(18, \"input\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"div\", 8)(20, \"button\", 9);\r\n        i0.ɵɵtext(21, \"Crear reserva\");\r\n        i0.ɵɵelementEnd()()()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.bookingData);\r\n    } }, directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.NumberValueAccessor, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.RequiredValidator], styles: [\"#modal-content-wrapper[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    display: grid;\\r\\n    grid-template-rows: repeat(1fr, 3);\\r\\n}\\r\\n.modal-title[_ngcontent-%COMP%] {\\r\\n    font-size: 22px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n#modal-close-button[_ngcontent-%COMP%] {\\r\\n    background-color: #ce0909;\\r\\n}\\r\\n.content-modal[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n}\\r\\np[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    font-weight: bold;\\r\\n    font-size: 14pt;\\r\\n    width: 250px;\\r\\n}\\r\\nspan[_ngcontent-%COMP%]{\\r\\n    font-weight: bold;\\r\\n    font-size: 10pt;\\r\\n}\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    width: 100%;\\r\\n    padding: 10px;\\r\\n    border-radius: 5px;\\r\\n    border: solid 1px gray;\\r\\n    outline: none;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n    margin: 5px;\\r\\n    padding: 10px;\\r\\n    background-color: #0EAF8D;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    font-weight: bold;\\r\\n    width: 100px;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]:hover{\\r\\n    background-color: #1EDFB7;\\r\\n}\\r\\n.buttons[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: space-around;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLXJlZ2lzdHJhci1jaXRhcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixhQUFhO0lBQ2Isa0NBQWtDO0FBQ3RDO0FBQ0E7SUFDSSxlQUFlO0lBQ2YsaUJBQWlCO0FBQ3JCO0FBRUE7SUFDSSx5QkFBeUI7QUFDN0I7QUFFQTtJQUNJLGFBQWE7SUFDYix1QkFBdUI7QUFDM0I7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsaUJBQWlCO0lBQ2pCLGVBQWU7SUFDZixZQUFZO0FBQ2hCO0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsZUFBZTtBQUNuQjtBQUVBO0lBQ0ksV0FBVztJQUNYLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsc0JBQXNCO0lBQ3RCLGFBQWE7QUFDakI7QUFJQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLFlBQVk7QUFDaEI7QUFFQTtJQUNJLHlCQUF5QjtBQUM3QjtBQUdBO0lBQ0ksYUFBYTtJQUNiLDZCQUE2QjtBQUNqQyIsImZpbGUiOiJtb2RhbC1yZWdpc3RyYXItY2l0YXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNtb2RhbC1jb250ZW50LXdyYXBwZXIge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMWZyLCAzKTtcclxufVxyXG4ubW9kYWwtdGl0bGUge1xyXG4gICAgZm9udC1zaXplOiAyMnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbiNtb2RhbC1jbG9zZS1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NlMDkwOTtcclxufVxyXG5cclxuLmNvbnRlbnQtbW9kYWx7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbnB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxNHB0O1xyXG4gICAgd2lkdGg6IDI1MHB4O1xyXG59XHJcblxyXG5zcGFue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBmb250LXNpemU6IDEwcHQ7XHJcbn1cclxuXHJcbmlucHV0e1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggZ3JheTtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcblxyXG5cclxuYnV0dG9ue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzBFQUY4RDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG59XHJcblxyXG5idXR0b246aG92ZXJ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUVERkI3O1xyXG59XHJcblxyXG5cclxuLmJ1dHRvbnN7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}